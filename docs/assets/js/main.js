"use strict";const favorites=document.querySelector(".js-favorites"),btn=document.querySelector(".js-btn"),seriesContainer=document.querySelector(".js-container"),msgError=document.querySelector(".js-msg-error"),inputSearch=document.querySelector(".js-input-search");let series=[],fav=[];function searchInfo(e){e&&e.preventDefault();const n=inputSearch.value.trim();""!==n?fetch("https://api.tvmaze.com/search/shows?q="+n).then(e=>{if(!e.ok)throw new Error("No consigo encontrarlo...");return e.json()}).then(e=>{series=e,msgError.innerHTML="",renderSerieList(e)}).catch(e=>{msgError.innerHTML=e.message}):msgError.innerHTML="Esa serie no la he visto ðŸ‘€"}function renderSerie(e,n){const r=e.show.image?e.show.image.original:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let t=`\n    <div class="card__serie-container js-ulElements" id="${e.show.id}">\n      <h2 class="serie__title">${e.show.name}</h2>\n      <ul>\n        <li class="js-liElements">\n          <img src="${r}" alt="${e.show.name}" title="${e.show.name}" />\n        </li>\n      </ul>`;return"flagFav"===n&&(t+=`<span class="remove-x" data-id="${e.show.id}">X</span>`),t+="</div>",t}function renderSerieList(e){const n=document.createDocumentFragment();for(const r of e){const e=document.createElement("div");e.innerHTML=renderSerie(r),n.appendChild(e)}seriesContainer.innerHTML="",seriesContainer.appendChild(n),addEventsToSerie()}function renderSeriesFav(e){favorites.innerHTML="";for(const n of e)favorites.innerHTML+=renderSerie(n,"flagFav")}function handleClickId(e){const n=parseInt(e.currentTarget.id),r=series.find(e=>e.show.id===n),t=fav.findIndex(e=>e.show.id===n);-1===t?(fav.push(r),e.currentTarget.classList.add("add__to-fav")):(fav.splice(t,1),e.currentTarget.classList.remove("add__to-fav")),renderSeriesFav(fav,"flagFav"),addEventsToXFav(),localStorage.setItem("fav",JSON.stringify(fav))}function addEventsToSerie(){const e=document.querySelectorAll(".js-ulElements");for(const n of e)n.addEventListener("click",handleClickId)}function addEventsToXFav(){const e=document.querySelectorAll(".remove-x");for(const n of e)n.addEventListener("click",handleRemoveFav)}function handleRemoveFav(e){e.preventDefault();const n=parseInt(e.currentTarget.getAttribute("data-id")),r=fav.findIndex(e=>e.show.id===n);fav.splice(r,1),renderSeriesFav(fav),addEventsToXFav(),localStorage.setItem("fav",JSON.stringify(fav))}fav=JSON.parse(localStorage.getItem("fav"))||[],btn.addEventListener("click",searchInfo),inputSearch.addEventListener("input",()=>{msgError.innerHTML=""}),inputSearch.addEventListener("keydown",e=>{"Enter"===e.key&&searchInfo(e)}),renderSeriesFav(fav),addEventsToXFav();