{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//CONSTANTES\nconst favorites = document.querySelector('.js-favorites');\nconst btn = document.querySelector('.js-btn');\nconst seriesContainer = document.querySelector('.js-container');\nconst msgError = document.querySelector('.js-msg-error');\n\n//VARIABLES\nlet series = [];\nlet fav = [];\n\nconst serieLocalStorage = JSON.parse(localStorage.getItem('fav'));\n\n// FUNCIONES\n\n//El fetch tiene que pintar una serie en el HTML\nfunction searchInfo(event) {\n  event.preventDefault();\n  const inputText = document.querySelector('.js-input-search').value;\n  fetch(`https://api.tvmaze.com/search/shows?q=${inputText}`)\n    .then((reponse) => reponse.json())\n    .then((dataApi) => {\n      series = dataApi;\n      if (inputText === '') {\n        msgError.innerHTML = 'Esa serie no la he visto 👀';\n      } else {\n        msgError.innerHTML = '';\n        renderSerieList(dataApi);\n      }\n    });\n}\n\n// function saveInfoFromLocalStorage() {\n// }\n\n// function getInfoFromLocalStorage() {\n//   const result = JSON.parse(localStorage.getItem('fav'));\n//   if (result === null) {\n//     return [];\n//   } else {\n//     fav = result;\n//     return fav;\n//   }\n// }\n\n//Función para pintar UNA serie en el HTML, renderSerie\n// USAR DOM EN EL HTML DE ESTA FUNCIÓN\n\nfunction renderSerie(oneSerie) {\n  let html = '';\n  html += `<h2 class=\"serie__title\">${oneSerie.show.name}</h2>`;\n  html += `<ul id= ${oneSerie.show.id} class=\"js-ulElements\">`;\n  if (oneSerie.show.image) {\n    html += `<li class=\"js-liElements\"><img src=\"${oneSerie.show.image.original}\" alt=\"${oneSerie.show.name}\" title=\"${oneSerie.show.name}\"/></li>`;\n  } else {\n    html += `<li class=\"js-liElements\"><img src=\"https://via.placeholder.com/210x295/ffffff/666666/?\n           text=TV\" alt=\"${oneSerie.show.name}\" title=\"${oneSerie.show.name}\" class=\"\"/></li>`;\n  }\n\n  html += `</ul>`;\n  return html;\n}\n// FUNCIÓN ANTERIOR CON DOM\n// function renderSerie(oneSerie) {\n//   let html = '';\n\n//   const h2Title = document.createElement('h2');\n//   h2Title.classList.add('serie__title');\n//   h2Title.textContent = oneSerie.show.name;\n\n//   const ulElement = document.createElement('ul');\n//   ulElement.id = oneSerie.show.id;\n//   ulElement.classList.add('js-ulElements');\n//   ulElement.appendChild(liElement);\n\n//   const liElement = document.createElement('li');\n//   liElements.classList.add('js-liElements');\n//   liElement.appendChild(imgElement);\n\n//   const imgElement = document.createElement('img');\n//   imgElement.alt = oneSerie.show.name;\n//   imgElement.title = oneSerie.show.name;\n\n//   if (oneSerie.show.image) {\n//     imgElement.src = oneSerie.show.image.original;\n//   } else {\n//     imgElement.src =\n//       'https://via.placeholder.com/210x295/ffffff/666666/?text=TV';\n//     imgElement.classList.add('js-liElements-img');\n//   }\n\n//   html.appendChild(h2Title);\n//   html.appendChild(ulElement);\n\n//   return html;\n// }\n\nfunction renderSerieList(listSeries) {\n  seriesContainer.innerHTML = '';\n  for (const oneSerie of listSeries) {\n    seriesContainer.innerHTML += renderSerie(oneSerie);\n  }\n\n  // lo pinto aquí porque antes no tiene sentido pintarlo porque no existe, vacío\n  addEventsToSerie();\n}\n\nfunction renderSeriesFav(favSeries) {\n  favorites.innerHTML = '';\n  for (const oneSerie of favSeries) {\n    favorites.innerHTML += renderSerie(oneSerie);\n  }\n}\n\n// AÑADIR SERIES FAVORITAS\nfunction handleClickId(event) {\n  const idSerieClick = parseInt(event.currentTarget.id); //porque estoy comparando string con número en id, se pasa a número con número\n  const foundSerie = series.find(\n    (oneSerie) => oneSerie.show.id === idSerieClick\n  );\n\n  const serieFav = fav.findIndex(\n    (oneSerie) => oneSerie.show.id === idSerieClick\n  );\n  //si no está lo añado\n  if (serieFav === -1) {\n    fav.push(foundSerie);\n  } else {\n    // si está lo quito\n    fav.splice(serieFav, 1);\n  }\n  renderSeriesFav(fav);\n\n  localStorage.setItem('fav', JSON.stringify(fav));\n  if (serieLocalStorage !== null) {\n    series = serieLocalStorage;\n    renderSeriesFav(fav);\n  } else {\n    searchInfo();\n  }\n}\n\n// EVENTOS\n\nfunction addEventsToSerie() {\n  const allSeries = document.querySelectorAll('.js-ulElements');\n  for (const oneSerie of allSeries) {\n    oneSerie.addEventListener('click', handleClickId);\n  }\n}\nbtn.addEventListener('click', searchInfo);\n"]}