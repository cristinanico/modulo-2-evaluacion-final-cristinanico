{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// CONSTANTES\nconst favorites = document.querySelector('.js-favorites');\nconst btn = document.querySelector('.js-btn');\nconst seriesContainer = document.querySelector('.js-container');\nconst msgError = document.querySelector('.js-msg-error');\nconst inputSearch = document.querySelector('.js-input-search');\n\n// VARIABLES\nlet series = [];\nlet fav = [];\n\nconst serieLocalStorage = JSON.parse(localStorage.getItem('fav')) || []; //coge datos o arrays, porque daba fallo.\n\n// FUNCIONES\n\nfunction searchInfo(event) {\n  if (event) {\n    event.preventDefault();\n  }\n  const inputText = inputSearch.value.trim(); //elimina espacios en blanco en los extremos de los string\n  if (inputText === '') {\n    msgError.innerHTML = 'Esa serie no la he visto üëÄ';\n    return;\n  }\n\n  fetch(`https://api.tvmaze.com/search/shows?q=${inputText}`)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error('No consigo encontrarlo...'); // google, preguntar bien. Creo que le dice al ordena que algo est√° roto y esto lo para.\n      }\n      return response.json();\n    })\n    .then((dataApi) => {\n      series = dataApi;\n      msgError.innerHTML = '';\n      renderSerieList(dataApi);\n    })\n    .catch((error) => {\n      msgError.innerHTML = error.message;\n    });\n}\n\nfunction renderSerie(oneSerie) {\n  const imageSrc = oneSerie.show.image\n    ? oneSerie.show.image.original\n    : 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV';\n\n  return `\n    <div class=\"card__serie-container\">\n      <h2 class=\"serie__title\">${oneSerie.show.name}</h2>\n      <ul id=\"${oneSerie.show.id}\" class=\"js-ulElements\">\n        <li class=\"js-liElements\">\n          <img src=\"${imageSrc}\" alt=\"${oneSerie.show.name}\" title=\"${oneSerie.show.name}\" />\n        </li>\n      </ul>\n    </div>\n  `;\n}\n\nfunction renderSerieList(listSeries) {\n  const fragment = document.createDocumentFragment(); // busqu√© en google y me dec√≠a que a√±adiera un fragmento, pero no lo entiendo.\n  for (const oneSerie of listSeries) {\n    const serieElement = document.createElement('div');\n    serieElement.innerHTML = renderSerie(oneSerie);\n    fragment.appendChild(serieElement);\n  }\n  seriesContainer.innerHTML = '';\n  seriesContainer.appendChild(fragment);\n  addEventsToSerie();\n}\n\nfunction renderSeriesFav(favSeries) {\n  favorites.innerHTML = '';\n  for (const oneSerie of favSeries) {\n    favorites.innerHTML += renderSerie(oneSerie);\n    // Va aqu√≠ el poner el fondo de diferente color?\n  }\n}\n\n// A√ëADIR SERIES FAVORITAS\nfunction handleClickId(event) {\n  const idSerieClick = parseInt(event.currentTarget.id);\n\n  const foundSerie = series.find((oneSerie) => oneSerie.show.id === idSerieClick);\n\n  const serieFavIndex = fav.findIndex((oneSerie) => oneSerie.show.id === idSerieClick);\n\n  if (serieFavIndex === -1) {\n    fav.push(foundSerie);\n  } else {\n    fav.splice(serieFavIndex, 1); //elimina, agrega o sustituye en el array\n  }\n  \n  renderSeriesFav(fav);\n  localStorage.setItem('fav', JSON.stringify(fav));\n}\n\n// EVENTOS\nfunction addEventsToSerie() {\n  const allSeries = document.querySelectorAll('.js-ulElements');\n  for (const oneSerie of allSeries) {\n    oneSerie.addEventListener('click', handleClickId);\n  }\n}\n\nbtn.addEventListener('click', searchInfo);\ninputSearch.addEventListener('input', () => {\n  msgError.innerHTML = '';\n});\ninputSearch.addEventListener('keydown', (event) => {\n  if (event.key === 'Enter') {\n    searchInfo(event);\n  }\n});\n\n// Cargar las series favoritas almacenadas en localStorage al iniciar la p√°gina\nrenderSeriesFav(serieLocalStorage);\n"]}